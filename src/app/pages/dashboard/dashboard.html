<div (window:resize)="onMobileResize($event)">  
  <button *ngIf="screenType == 'Desktop'" mat-fab (click)="toggleCompact()" color="warn" style="position:fixed; right:64px; bottom: 64px; z-index:100;">
    <mat-icon *ngIf="isCompact" role="img" fontSet="mdi-set" fontIcon="mdi-arrow-expand-all"></mat-icon>
    <mat-icon *ngIf="!isCompact" role="img" fontSet="mdi-set" fontIcon="mdi-arrow-collapse-all"></mat-icon>
  </button>
  <div class="widgets-wrapper"
       fxLayout="row wrap"
       fxLayoutAlign="center center"
       fxLayoutAlign.gt-sm="start start">

    <!-- SORTABLE WIDGETS -->
    <ng-container  *ngIf="screenType == 'Desktop' && statsDataEvents && pools && nics && volumeData && sysinfoReady">
      <ng-container  *ngIf="dashState && widgetStates">
        <ng-container  *ngFor="let widget of dashState; let i=index">
          <ng-container  *ngIf="widget.rendered">
            <ng-container [ngSwitch]="widget.name.toLowerCase()">
             
              <widget-sysinfo *ngSwitchCase="'system information'" id="active" fxFlex="{{ widgetStates[i].isCompact ? '240px' : '600px'" [isCompact]="widgetStates[i].isCompact" fxFlex.xs="100" [isHA]="isHA" [passive]="false" [widgetSize]="medium"></widget-sysinfo>
              <widget-sysinfo *ngSwitchCase="'system information(standby)'" id="passive" [isCompact]="widgetStates[i].isCompact" fxFlex="{{ widgetStates[i].isCompact ? '240px' : '600px'}}" fxFlex.xs="100" [isHA]="isHA" [passive]="true" [widgetSize]="medium"></widget-sysinfo>
              

              <widget-cpu *ngSwitchCase="'cpu'" [isCompact]="widgetStates[i].isCompact" fxFlex="{{ widgetStates[i].isCompact ? '240px' : '600px'" fxFlex.xs="100" [data]="dataFromConfig(widget)" [cpuModel]="systemInformation.model" [widgetSize]="medium"   configurable="false"></widget-cpu>
  
              <widget-memory *ngSwitchCase="'memory'" [isCompact]="widgetStates[i].isCompact" fxFlex="{{ widgetStates[i].isCompact ? '240px' : '600px' }}" fxFlex.xs="100" [data]="dataFromConfig(widget)" [widgetSize]="medium"   configurable="false"></widget-memory>
             
              <widget-pool *ngSwitchCase="'pool'" [isCompact]="widgetStates[i].isCompact" fxFlex="{{ widgetStates[i].isCompact ? '240px' : '600px' }}" fxFlex.xs="100" [poolState]="dataFromConfig(widget)" [volumeData]="volumeDataFromConfig(widget)" [widgetSize]="medium" configurable="false"></widget-pool>
  
              <widget-nic *ngSwitchCase="'interface'" [isCompact]="widgetStates[i].isCompact" fxFlex="{{ widgetStates[i].isCompact ? '240px' : '600px' }}" fxFlex.xs="100" [nicState]="dataFromConfig(widget)" [stats]="statsDataEvents" [widgetSize]="medium" configurable="false"></widget-nic>
  
            </ng-container>
          </ng-container>
        </ng-container>
      </ng-container>
    </ng-container>


    <!--<widget-notes-collection fxFlex="98" [widgetSize]="medium" [widgetFlex]="noteFlex" [collectionLayout]="'row'"></widget-notes-collection>-->


  </div>
  <div [style.height.px]="50" *ngIf="isFooterConsoleOpen"></div>
</div>

<!--<button mat-fab color="primary" style="position:fixed; z-index:30;bottom:24px; right:24px;"><mat-icon role="img">settings</mat-icon></button>-->




    <!-- MOBILE WIDGETS -->
    <div class="mobile-viewport" [ngClass]="{'hidden': screenType == 'Desktop'}">
      <div class="carousel">
        <widget-controller (launcher)="onMobileLaunch($event)" *ngIf="screenType == 'Mobile' && dashState && dashState.length > 0;"  [rendered]="true" [dashState]="dashState" [widgetSize]="medium"   configurable="false"></widget-controller>
  
        <div class="mobile-widget-container">
          <ng-container  *ngIf="screenType == 'Mobile' && statsDataEvents && pools && nics && volumeData && sysinfoReady">
            <ng-container  *ngFor="let widget of activeMobileWidget">
              <ng-container [ngSwitch]="widget.name.toLowerCase()">
        
                <widget-sysinfo (back)="onMobileBack()" *ngSwitchCase="'system information'" id="active" [isHA]="isHA" [passive]="false" [widgetSize]="medium"></widget-sysinfo>
                <widget-sysinfo (back)="onMobileBack()" *ngSwitchCase="'system information(standby)'" id="passive" [isHA]="isHA" [passive]="true" [widgetSize]="medium"></widget-sysinfo>
      
                <widget-cpu (back)="onMobileBack()" *ngSwitchCase="'cpu'" [data]="dataFromConfig(widget)" [cpuModel]="systemInformation.model" [widgetSize]="medium"   configurable="false"></widget-cpu>
        
                <widget-memory (back)="onMobileBack()" *ngSwitchCase="'memory'" [data]="dataFromConfig(widget)" [widgetSize]="medium"   configurable="false"></widget-memory>
                
                <widget-pool (back)="onMobileBack()" *ngSwitchCase="'pool'" [poolState]="dataFromConfig(widget)" [volumeData]="volumeDataFromConfig(widget)" [widgetSize]="medium" configurable="false"></widget-pool>
        
                <widget-nic (back)="onMobileBack()" *ngSwitchCase="'interface'" [nicState]="dataFromConfig(widget)" [stats]="statsDataEvents" [widgetSize]="medium" configurable="false"></widget-nic>
        
              </ng-container>
            </ng-container>
          </ng-container>

        </div>
      </div>
    </div>


