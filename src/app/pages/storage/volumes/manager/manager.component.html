
<div *ngIf="error" [style.color]="'red'" [innerHTML]="error"></div>
<div>
  <div class="row">
    <div class="col-md-2" [style.paddingBottom]="'15px'">
    <md-card>
      <md-input-container>
        <input mdInput placeholder="Name" [(ngModel)]="name" value="Sushi" required>
      </md-input-container>    
      <!-- <input class="form-control" placeholder="Name" required/> -->
      <md-checkbox [(ngModel)]="isEncrypted" class="form-control" placeholder="Encryption" (change)="isEncryptedChecked()" >Encryption</md-checkbox>
    </md-card>
    </div>
  </div>
  <div class="col-md-3">
    <md-card>
      <md-card-title>Disks</md-card-title>
      <div class="md-content">
        <md-input-container>
          <input mdInput
            id="nameFilter"
            type='text'
            placeholder='Filter disks by name'
            (keyup)='updateFilter($event)'
          />
        </md-input-container>
        <md-input-container>
          <input mdInput
            id="capacityFilter"
            type='text'
            placeholder='Filter disks by capacity'
            (keyup)='updateFilter($event)'
          />
        </md-input-container>
        <md-error *ngIf="re_has_errors">{{re_errors}}</md-error>
        <ngx-datatable
          #table
          class="material ml-1 mt-1 mb-1 mr-1 mat-box-shadow" 
          [rows]="disks" 
          [headerHeight]="50" 
          [rowHeight]="50"
          [footerHeight]="50" 
          [columnMode]="'force'" 
          [limit]="10"
          [selected] = "selected"
          [selectionType]="'checkbox'"
          (select)='onSelect($event)'>
          <ngx-datatable-column
            [width]="30"
            [sortable]="false"
            [canAutoResize]="false"
            [draggable]="false"
            [resizeable]="false"
            [headerCheckboxable]="true"
            [checkboxable]="true">
          </ngx-datatable-column>
          <ngx-datatable-column name="Disk" prop="devname"></ngx-datatable-column>
          <ngx-datatable-column name="Capacity" prop="capacity"></ngx-datatable-column>
        </ngx-datatable>
      </div>
    </md-card>
  </div>
  <div class="row">
    <div class="col-md-9">
      <md-card>
      <md-card-title>Data Disk Groups (vdevs)</md-card-title>
      <div class="md-content">
        <app-vdev *ngFor="let vdev of vdevs.data; let i = index" [group]="'data'" [manager]="this" [index]="i"></app-vdev>
        <button md-raised-button class="btn btn-accent" (click)="addVdev('data')">Add Data</button>
        </div>
      </md-card>
      <md-card>
      <md-card-title>Cache Disk Groups (L2ARC vdevs)</md-card-title>
        <div class="md-content">
          <app-vdev *ngFor="let vdev of vdevs.cache; let i = index" [group]="'cache'" [manager]="this" [index]="i"></app-vdev>
          <button *ngIf="vdevs.cache.length === 0" md-raised-button class="btn btn-accent" (click)="addVdev('cache')">Add Cache</button>
        </div>
      </md-card>
      <md-card>
      <md-card-title>Log Disk Groups (ZIL vdevs)</md-card-title>
        <div class="md-content">
          <app-vdev *ngFor="let vdev of vdevs.log; let i = index" [group]="'log'" [manager]="this" [index]="i"></app-vdev>
          <button *ngIf="vdevs.log.length === 0" md-raised-button class="btn btn-accent" (click)="addVdev('log')">Add Log</button>
        </div>
      </md-card>
      <md-card>
      <md-card-title>Spare Disk Groups</md-card-title>
        <div class="md-content">
          <app-vdev *ngFor="let vdev of vdevs.spare; let i = index" [group]="'spare'" [manager]="this" [index]="i"></app-vdev>
          <button *ngIf="vdevs.spare.length === 0" md-raised-button class="btn btn-accent" (click)="addVdev('spare')">Add Spare</button>
        </div>
      </md-card>
    </div>

  </div>
  <div class="row">
    <div class="col-md-4">
      <button md-raised-button class="btn btn-primary" (click)="doSubmit()" color="primary">Create</button>
      <button md-raised-button class="btn  btn-block btn-raised btn-lg btn-primary" type="button" (click)="goBack()" color="accent">Cancel</button>
    </div>
  </div>
</div>
